 Puntos para analizar un sistema desde el SO; Analisis de vulnerabilidades desde dentro de un sistema sin herramientas!, con comandos Linux;

1.- SISTEMA:

- Versión de SO y Kernel, y vuln https://www.cvedetails.com/

uname -a

- Versión de sudo y vulnerabilidades, Vuln a escalado de privilegios, desde la 1.8.2, hasta la 1.8.31p2 y desde la 1.9.0, hasta la 1.9.5p1

sudo -V  

Version de ssh

ssh -V

Version de apache

apache -V 

Versión de openssl version

openssl version

2.- AUTENTICACION:

- Usuarios, grupos y privilegios en local: 

cat /etc/passwd - usuarios que pueden abrir una vengana shell,

cat /etc/group - usuarios agregados a que grupos!

cat /etc/shadow - usuarios y claves cifradas en SHA -  - solo deberia ser visible el contenido si somos SuperUser, root!

- fichero etc/ldap - que LDAP esta configurado para autenticar y mecanismos en de bloqueo en el LDAP para fuerxza bruta.

cat etc/ldap/ldap.conf

- Mecanismos en de bloqueos para fuerza bruta usuarios locales

ssh admin@localhost, ssh antonio@localhost o telnet localhost o login web..

- usuario actual y privlegios, para ejecturar scripts en bash shell, python, etc.. y posibilidad de instalar y ejecutar ./lynis audit system

whoami

who

- escalado de privilegios, configuraciones especificas para elevar privilegios

sudo su, su, sesu, permite elevar privilegios a SuperUser, sobre el usaurio actual

cat /etc/sudoers  , fichero de configuracion sudoers

cat /etc/group, usarios añadidos en el grupo "sudo"

3.- CARPETAS e informaión:

- carpetas /home - Carpetas personales y seguridad entre usuarios
ls /home

4.- IP:

- interfaces y direcciones asigandas entre ellos: 

ifconfig

ip route list

route

arp

echo "Vecinos IPv6: " && ip -6 neigh

5.- INTERNET: 

- salida a internet

ping 8.8.8.8 

traceroute hackingyseguridad.com

traceroute ngrok.io -T -p 443 -A

wget http://ipinfo.io/ip -qO -

nslookup ngrok.io

Comando netcat, nc -knvp 9999

6.- RUTA

- ruta de salida a internet a traves de donde

ip route show

ip route list

traceroute -A 194.179.1.100 

echo "Ver routas" && route -A inet -A inet6

7.- DNS configurados!

cat /etc/resolv.conf

cat /etc/resolv.conf | grep 'nameserver' | awk '{print $2}'

8.- PUERTOS TCP/UDP Y SERVICIOS ACTIVOS:

ss -tulnp , conexiones establecidas y puertos abiertos!

netstat -pnltu  , conexiones establecidas y puretos abiertos escuchando!

lsof -i , conexiones establecidas 

echo "Mascara: " $(ifconfig |grep netmask)

procesos abiertos

ps -ALL

9.- SECRETOS ( password, claves )

find / -name "passwd"

grep  -Hrn "passwd" /

find / -type f -exec grep -H user {} \;

grep -r user /*

10.- CIFRADOS: 

Cifrados soportados por la version OpenSSL

openssl ciphers

11º.- INFORMACION RECURSOS Y CARGA: 

echo "Carga promedio" && cat /proc/loadavg | cut -f 1-3 -d ' '

echo "memoria RAM: ",  "\n$(free -m | grep -v +)"

echo "Unidades de disco:", "\n$(df -h| grep 'Filesystem\|^/dev/*')"

echo "Tiempo de actividad.: " && uptime -p | cut -f 2- -d " "


http://www.hackingyseguridad.com/
